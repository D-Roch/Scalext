<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Scalext by Rovak</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Scalext</h1>
        <p class="header">Ext JS 4.2 Driver for Play Framework 2.1</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/Rovak/Scalext/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/Rovak/Scalext/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/Rovak/Scalext">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/Rovak">Rovak</a></p>


      </header>
      <section>
        <h1>
<a name="scalext" class="anchor" href="#scalext"><span class="octicon octicon-link"></span></a>Scalext</h1>

<p>Ext JS Driver for Play Framework 2.1</p>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Supports single or batched JSON requests</li>
<li>Automatic json serialization of method results</li>
<li>Direct API configuration using annotations</li>
<li>DSL for creating Ext JS objects</li>
<li>Parallel execution of batched requests</li>
</ul><h2>
<a name="roadmap" class="anchor" href="#roadmap"><span class="octicon octicon-link"></span></a>Roadmap</h2>

<ul>
<li>Unit tests</li>
<li>Support for more frameworks</li>
<li>Expanding DSL</li>
</ul><h2>
<a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting started</h2>

<p>Download the latest distributable jar <a href="http://data.razko.nl/projects/scalext/">here</a> and put it in your <code>lib</code> folder</p>

<p>Add the classes from which you want to generate a Direct Api to <code>conf/application.conf</code>, for example:</p>

<pre><code>scalext.direct.classes="direct.ProfileForm,direct.RegistrationForm,direct.EchoService"
</code></pre>

<p>Generate the Direct Api inside a view by adding the following code:</p>

<div class="highlight"><pre><span class="nd">@import</span> <span class="n">play</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">libs</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="nc">Json</span>
<span class="o">&lt;</span><span class="n">script</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/javascript"</span><span class="o">&gt;</span>
<span class="nc">Ext</span><span class="o">.</span><span class="n">direct</span><span class="o">.</span><span class="nc">Manager</span><span class="o">.</span><span class="n">addProvider</span><span class="o">(</span><span class="nd">@Html</span><span class="o">(</span><span class="nc">Json</span><span class="o">.</span><span class="n">stringify</span><span class="o">(</span><span class="n">com</span><span class="o">.</span><span class="n">scalext</span><span class="o">.</span><span class="n">direct</span><span class="o">.</span><span class="n">remoting</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="nc">ApiFactory</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">toJson</span><span class="o">)));</span>
<span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>

<p>The Direct Api is now available!</p>

<h2>
<a name="configuring-the-direct-api" class="anchor" href="#configuring-the-direct-api"><span class="octicon octicon-link"></span></a>Configuring the Direct API</h2>

<p>Classes can be exposed to the Direct API by adding annotations to methods.</p>

<div class="highlight"><pre><span class="k">case</span> <span class="k">class</span> <span class="nc">Profile</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">email</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">company</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="nd">@Remotable</span><span class="o">(</span><span class="n">name</span> <span class="k">=</span> <span class="s">"Scalext.example.Profile"</span><span class="o">)</span>
<span class="k">class</span> <span class="nc">Form</span> <span class="o">{</span>

  <span class="nd">@Remotable</span>
  <span class="k">def</span> <span class="n">getBasicInfo</span><span class="o">()</span><span class="k">:</span> <span class="kt">FormResult</span> <span class="o">=</span> <span class="o">{</span>
    <span class="k">var</span> <span class="n">profile</span> <span class="k">=</span> <span class="nc">Profile</span><span class="o">(</span>
      <span class="s">"Roy van Kaathoven"</span><span class="o">,</span>
      <span class="s">"ik@royvankaathoven.nl"</span><span class="o">,</span>
      <span class="s">"Roy"</span><span class="o">)</span>

    <span class="nc">FormResult</span><span class="o">(</span><span class="n">profile</span><span class="o">)</span>
  <span class="o">}</span>

  <span class="nd">@FormHandler</span>
  <span class="k">def</span> <span class="n">updateBasicInfo</span><span class="o">(</span><span class="n">profile</span><span class="k">:</span> <span class="kt">Profile</span><span class="o">)</span><span class="k">:</span> <span class="kt">FormResult</span> <span class="o">=</span> <span class="o">{</span>
    <span class="nc">FormResult</span><span class="o">(</span>
      <span class="kc">null</span><span class="o">,</span>
      <span class="n">errors</span> <span class="k">=</span> <span class="nc">Map</span><span class="o">(</span><span class="s">"name"</span> <span class="o">-&gt;</span> <span class="s">"wrong info"</span><span class="o">))</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<div class="highlight"><pre><span class="nd">@Remotable</span><span class="o">(</span><span class="n">name</span> <span class="k">=</span> <span class="s">"Scalext.example.Upload"</span><span class="o">)</span>
<span class="k">class</span> <span class="nc">Upload</span> <span class="o">{</span>

  <span class="nd">@FormHandler</span>
  <span class="k">def</span> <span class="n">uploadFile</span><span class="o">(</span><span class="n">post</span><span class="k">:</span> <span class="kt">Any</span><span class="o">,</span> <span class="n">files</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">TemporaryFile</span><span class="o">])</span><span class="k">:</span> <span class="kt">FormResult</span> <span class="o">=</span> <span class="o">{</span>

    <span class="n">println</span><span class="o">(</span><span class="s">"Post "</span> <span class="o">+</span> <span class="n">post</span><span class="o">)</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"Files "</span> <span class="o">+</span> <span class="n">files</span><span class="o">)</span>

    <span class="nc">FormResult</span><span class="o">(</span><span class="nc">Map</span><span class="o">(</span><span class="s">"msg"</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="s">"${files.size} file(s) succesfully uploaded"</span><span class="o">))</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>

<p>The <code>@Remotable</code> annotation marks a method as Direct Method, which means it will be exposed to the Direct API.
By default the method- or classname will be used, this can be overridden by setting the <code>name</code> parameter.</p>

<p>The <code>@FormHandler</code> annotation marks a method as as Form submit handler, which means it can handle form submissions and even file uploads.
If the method has to read file uploads then make sure the second parameter can handle the <code>Seq[TemporaryFile]</code> type.</p>

<h2>
<a name="documentation" class="anchor" href="#documentation"><span class="octicon octicon-link"></span></a>Documentation</h2>

<ul>
<li><a href="http://ci.razko.nl/job/Scalext/Documentation/index.html">API</a></li>
<li><a href="https://github.com/Rovak/ScalextExample">Example project</a></li>
</ul>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>